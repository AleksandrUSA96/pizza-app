(this["webpackJsonppizza-app"]=this["webpackJsonppizza-app"]||[]).push([[0],{110:function(e,t,a){e.exports={header:"Header_header__3xTmH"}},116:function(e,t,a){e.exports=a(241)},18:function(e,t,a){e.exports={nav:"Navbar_nav__1NUJc",item:"Navbar_item__2UkqY",active:"Navbar_active__2Mc6m"}},198:function(e,t,a){},199:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){e.exports={element:"Element_element__2DAHE",imgElement:"Element_imgElement__sksO6",name:"Element_name__3UMW1",description:"Element_description__1cOtT",price:"Element_price__kfWaB",addToCart:"Element_addToCart__3JWe9",wrapElement:"Element_wrapElement__2t6wh",wrapPriceButton:"Element_wrapPriceButton__1MOR1",wrapPrice:"Element_wrapPrice__2POEZ"}},241:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(8),r=a(51),c=a(11),l={pizzaItems:[]},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MENU":return Object(c.a)(Object(c.a)({},e),{},{pizzaItems:Object(r.a)(t.pizzaItems)});default:return e}},o=a(27),m=function(e,t,a,n,r,c,l,i,m){return o.post("http://localhost:3001/create-order/",{name:e,sureName:t,address:a,tel:n,email:r,cartItem:i,totalPriceE:c,totalPriceD:l,numOrder:m})},u=function(e){return o.get("http://localhost:3001/login?phonenumber=".concat(e,"&channel=sms"))},s=function(e,t){return o.get("http://localhost:3001/verify?phonenumber=".concat(e,"&code=").concat(t))},d=function(){return o.get("http://localhost:3001/auth",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})},p=function(){return o.get("http://localhost:3001/profile",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})},E=0,f=0,v=Math.floor(Math.random()*Math.floor(100)),_=null,h={cartItems:[],quantityInCart:null,numOrder:null,totalPricesDE:{totalPriceE:null,totalPriceD:null},totalDeliveryDE:{deliveryPriceE:2,deliveryPriceD:2.5},showPriceVal:!1,orderResponse:{numOrder:null,name:null}},b=function(e){return{type:"SHOW_PRICE",showPriceVal:e}},O=function(e,t){return{type:"SET_NULL",data:{numOrder:e,name:t}}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PIZZA":0===e.cartItems.length?(e.cartItems.push({item:t.cartItems,count:1}),e.quantityInCart++):e.cartItems.find((function(e){return e.item.id===t.cartItems.id}))?(e.cartItems.find((function(e){return e.item.id===t.cartItems.id})).count++,e.quantityInCart++):(e.cartItems.push({item:t.cartItems,count:1}),e.quantityInCart++);case"TOTAL_PRICE":if(0!==e.cartItems.length)for(var a=0;a<e.cartItems.length;a++)e.cartItems.length,E=Number(e.cartItems[a].item.priceDollar*e.cartItems[a].count),f=Number(e.cartItems[a].item.priceEuro*e.cartItems[a].count);0===E&&0===f?(E=e.totalDeliveryDE.deliveryPriceD,f=e.totalDeliveryDE.deliveryPriceE):(e.totalPricesDE.totalPriceE=f.toFixed(2),e.totalPricesDE.totalPriceD=E.toFixed(2),e.numOrder=v);case"SHOW_PRICE":"SHOW_PRICE"===t.type&&(e.showPriceVal?e.showPriceVal=!1:e.showPriceVal=!0);case"SET_NULL":200===_&&(e.cartItems=[],e.quantityInCart=null,e.numOrder=null,e.totalPricesDE.totalPriceE=null,e.totalPricesDE.totalPriceD=null,e.totalDeliveryDE.deliveryPriceE=null,e.totalDeliveryDE.deliveryPriceD=null,e.showPriceVal=!1,e.orderResponse.numOrder=t.data.numOrder,e.orderResponse.name=t.data.name,_=null);default:return e}},P={tel:null,name:null,isAuth:!1,verifyDisplay:"none",loginHide:"flex"},y=function(e,t,a){return{type:"SET_USER_DATA",data:{tel:e,name:t,isAuth:a}}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(c.a)(Object(c.a)({},e),{},{tel:t.data.tel,name:t.data.name,isAuth:!0});case"LOGOUT":return localStorage.removeItem("token"),Object(c.a)(Object(c.a)({},e),{},{tel:null,name:null,isAuth:!1});case"SET_VERIFY_DISPLAY":return Object(c.a)(Object(c.a)({},e),{},{verifyDisplay:t.verifyDisplay});case"SET_LOGIN_HIDE":return Object(c.a)(Object(c.a)({},e),{},{loginHide:t.loginHide});default:return e}},I=a(244),w=a(107),j={orderItems:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ORDERS_HISTORY":return Object(c.a)(Object(c.a)({},e),{},{orderItems:Object(r.a)(t.orderItems)});default:return e}},C=Object(n.c)({menuPage:i,cartMenu:g,loginPage:N,profilePage:D,form:I.a}),S=Object(n.d)(C,Object(n.a)(w.a));window.store=S;var z=S,M=a(0),T=a.n(M),k=a(49),A=a.n(k),R=(a(198),a(199),a(21)),V=a(7),L=(a(110),a(18)),F=a.n(L),H=a(3),B=function(){var e=Object(H.d)((function(e){return e.cartMenu.quantityInCart})),t=Object(H.d)((function(e){return e.loginPage.isAuth})),a=Object(H.d)((function(e){return e.loginPage.tel})),n=Object(H.d)((function(e){return e.loginPage.name})),r=Object(H.c)();return T.a.createElement("nav",{className:F.a.nav},T.a.createElement("h2",null,"Navigation"),T.a.createElement("ul",null,T.a.createElement("li",{className:F.a.item},T.a.createElement(R.b,{to:"/Menu",activeClassName:F.a.active},"Menu")),T.a.createElement("li",{className:F.a.item},T.a.createElement(R.b,{to:"/Cart",activeClassName:F.a.active},"Cart ",e)),T.a.createElement("li",{className:F.a.item},t?T.a.createElement(R.b,{to:"/Profile",activeClassName:F.a.active},"Your profile, ",n?n+"!":"+ "+a):T.a.createElement(R.b,{to:"/Login",activeClassName:F.a.active},"Login")),T.a.createElement("li",{className:F.a.item},t&&T.a.createElement(R.b,{to:"/Login",onClick:function(){return r({type:"LOGOUT"})},activeClassName:F.a.active},"Logout"))))},x=a(9),U=a.n(x),W=a(243),Y=a(242),q=function(e){if(!e)return"Field is required!"},Z=a(115),$=a(52),J=a.n($),G=function(e){var t=e.input,a=e.meta,n=Object(Z.a)(e,["input","meta"]),r=a.touched&&a.error;return T.a.createElement("div",{className:J.a.formControl+" "+(r?J.a.error:"")},T.a.createElement("div",null,T.a.createElement("input",Object.assign({className:J.a.input},t,n))),r&&T.a.createElement("span",null,a.error))},K=function(e){var t=Object(H.d)((function(e){return e.cartMenu.cartItems}));return T.a.createElement("form",{onSubmit:e.handleSubmit,style:{display:0===t.length?"none":"block"}},T.a.createElement("div",{className:U.a.wrapInput},T.a.createElement(W.a,{component:G,placeholder:"Name",name:"name",validate:q}),T.a.createElement(W.a,{component:G,placeholder:"Surname name",name:"sureName"})),T.a.createElement("div",{className:U.a.wrapInput},T.a.createElement(W.a,{component:G,placeholder:"Address",name:"address",validate:q}),T.a.createElement(W.a,{component:G,placeholder:"Phone number",name:"tel",validate:q})),T.a.createElement("div",{className:U.a.wrapInput},T.a.createElement(W.a,{component:G,placeholder:"E-mail",name:"email",validate:q}),T.a.createElement("button",{className:U.a.buttonForm},"Submit Order")))},X=Object(Y.a)({form:"formOrder"})(K),Q=function(){var e=Object(H.d)((function(e){return e.cartMenu.totalPricesDE})),t=Object(H.d)((function(e){return e.cartMenu.totalDeliveryDE})),a=Object(H.d)((function(e){return e.cartMenu.showPriceVal})),n=Object(H.d)((function(e){return e.cartMenu.orderResponse})),r=Object(H.d)((function(e){return e.cartMenu.cartItems})),c=Object(H.c)();return T.a.createElement("div",{className:U.a.switcherCartWrap},T.a.createElement("div",null,T.a.createElement("h4",null,T.a.createElement("span",null,null===e.totalPriceD&&null===e.totalPriceE?"Cart is empty.":a?"The total cost of your order: "+e.totalPriceD+"$, also delivery costs: "+t.deliveryPriceD+"$; ":"The total cost of your order: "+e.totalPriceE+"\u20ac, also delivery costs: "+t.deliveryPriceE+"\u20ac"),T.a.createElement("span",null,null===n.numOrder&&null===n.name?"":"Dear "+n.name+". Your order is accepted, your order number: \u2116"+n.numOrder),T.a.createElement("span",null,null!==n.numOrder||null===n.name?"":"Your order is accepted, your order number: \u2116"+n.numOrder))),T.a.createElement("div",{className:U.a.showVal,style:{display:0===r.length?"none":"block"},onClick:function(){return c(b(a))}},a?"Show price in \u20ac":"Show price in $"))},ee=function(){var e=Object(H.d)((function(e){return e.cartMenu.cartItems})),t=Object(H.d)((function(e){return e.cartMenu.totalPricesDE})),a=Object(H.d)((function(e){return e.cartMenu.numOrder})),n=Object(H.d)((function(e){return e.cartMenu.showPriceVal})),r=Object(H.c)();return T.a.createElement("div",null,T.a.createElement("h3",null,"Cart"),T.a.createElement(Q,null),T.a.createElement("div",{className:U.a.wrapElement},e.map((function(e){return T.a.createElement("div",{className:U.a.element,key:e.item.id},T.a.createElement("img",{className:U.a.imgElement,src:e.item.img,alt:e.item.name}),T.a.createElement("div",{className:U.a.name},T.a.createElement("span",null,"Pizza:")," ",e.item.name),T.a.createElement("div",{className:U.a.description},T.a.createElement("span",null,"Description:")," ",e.item.description),T.a.createElement("div",{className:U.a.wrapPrice},T.a.createElement("div",{className:U.a.price},T.a.createElement("span",null,"Price: "),n?e.item.priceDollar+"$":e.item.priceEuro+"\u20ac"),T.a.createElement("div",{className:U.a.price},T.a.createElement("span",null,"Count:")," ",e.count)))}))),T.a.createElement(X,{onSubmit:function(n){r(function(e,t,a,n,r,c,l,i,o,u,s){return function(d){m(e,t,a,n,r,c,l,i,o,u,s).then((function(e){_=e.data.status,e.data.orderResp,d(O(e.data.orderResp.numOrder,e.data.orderResp.name))}))}}(n.name,n.sureName,n.address,n.tel,n.email,Number(t.totalPriceD).toFixed(2),Number(t.totalPriceE).toFixed(2),e,a)),console.log(n)}}))},te=a(22),ae=a.n(te),ne=function(){var e=Object(H.c)(),t=Object(H.d)((function(e){return e.profilePage.orderItems})),a=Object(H.d)((function(e){return e.loginPage.isAuth}));return Object(M.useEffect)((function(){e((function(e){p().then((function(t){e({type:"SET_ORDERS_HISTORY",orderItems:t.data})}))}))}),[]),console.log(t),!1===a?T.a.createElement(V.a,{to:"/login"}):T.a.createElement("div",{className:ae.a.profile},"Here is Profile",t.map((function(e){return T.a.createElement("div",{className:ae.a.element,key:e.id},T.a.createElement("div",{className:ae.a.name},e.tel),T.a.createElement("div",{className:ae.a.name},e.num_order),T.a.createElement("div",{className:ae.a.name},e.count),T.a.createElement("img",{src:e.img,alt:e.name}),T.a.createElement("div",{className:ae.a.name},e.name),T.a.createElement("div",{className:ae.a.description},e.disc),T.a.createElement("div",{className:ae.a.price},e.tpd),T.a.createElement("div",{className:ae.a.price},e.tpe))})))},re=a(111),ce=a(112),le=a(114),ie=a(113),oe=a(54),me=a.n(oe),ue=a(23),se=a.n(ue),de=function(e){var t=Object(H.c)(),a=Object(H.d)((function(e){return e.cartMenu.showPriceVal}));return T.a.createElement("div",{className:se.a.wrapElement},e.pizzaItems.map((function(e){return T.a.createElement("div",{className:se.a.element,key:e.id},T.a.createElement("img",{className:se.a.imgElement,src:e.img,alt:e.name}),T.a.createElement("div",{className:se.a.name},T.a.createElement("span",null,"Pizza:")," ",e.name),T.a.createElement("div",{className:se.a.description},T.a.createElement("span",null,"Description:")," ",e.description),T.a.createElement("div",{className:se.a.wrapPriceButton},T.a.createElement("div",{className:se.a.wrapPrice},T.a.createElement("div",{className:se.a.price},T.a.createElement("span",null,"Price: "),a?e.priceDollar+"$":e.priceEuro+"\u20ac")),T.a.createElement("button",{className:se.a.addToCart,onClick:function(){return function(e){t({type:"ADD_PIZZA",cartItems:e})}(e)}},"Add to cart")))})))},pe=function(e){var t=Object(H.c)(),a=Object(H.d)((function(e){return e.cartMenu.showPriceVal}));return T.a.createElement("div",{className:me.a.menu},T.a.createElement("div",{className:me.a.headerWrap},T.a.createElement("h3",null,"Pizza's menu"),T.a.createElement("div",{className:me.a.showVal,onClick:function(){return t(b(a))}},a?"Show price in \u20ac":"Show price in $")),T.a.createElement(de,{pizzaItems:e.pizzaItems}))},Ee=function(e){Object(le.a)(a,e);var t=Object(ie.a)(a);function a(){return Object(re.a)(this,a),t.apply(this,arguments)}return Object(ce.a)(a,[{key:"componentDidMount",value:function(){var e=this;o.get("http://localhost:3001/menu").then((function(t){e.props.setMenu(t.data.items),console.log(t.data.items)}))}},{key:"render",value:function(){return T.a.createElement("div",null,T.a.createElement(pe,Object.assign({},this.props,{pizzaItems:this.props.pizzaItems})))}}]),a}(T.a.Component),fe=Object(H.b)((function(e){return{pizzaItems:e.menuPage.pizzaItems}}),{setMenu:function(e){return{type:"SET_MENU",pizzaItems:e}}})(Ee),ve=a(34),_e=a.n(ve),he=Object(Y.a)({form:"formVerify"})((function(e){return T.a.createElement("form",{className:_e.a.wrapForm,onSubmit:e.handleSubmit},T.a.createElement("div",null,T.a.createElement(W.a,{component:G,name:"code",placeholder:"Enter code",validate:q})),T.a.createElement("div",null,T.a.createElement("button",{className:_e.a.logButton},"Verify")))})),be=Object(H.b)(null,{verify:function(e,t){return function(a){s(e,t).then((function(e){console.log(e.data),a(y(e.data.user.tel,e.data.user.name,!0)),localStorage.setItem("token",e.data.token)}))}}})((function(e){var t=Object(H.d)((function(e){return e.form.formLogin})),a=Object(H.d)((function(e){return e.loginPage.verifyDisplay})),n=Object(V.f)();return T.a.createElement("div",{style:{display:a}},T.a.createElement(he,{onSubmit:function(a){e.verify(t.values.tel,a.code),n.push("/Profile")}}))})),Oe=Object(Y.a)({form:"formLogin"})((function(e){var t=Object(H.d)((function(e){return e.loginPage.loginHide}));return T.a.createElement("form",{className:_e.a.wrapForm,onSubmit:e.handleSubmit,style:{display:t}},T.a.createElement("div",null,T.a.createElement(W.a,{component:G,name:"tel",placeholder:"Enter phone number",validate:q})),T.a.createElement("div",null,T.a.createElement("button",{className:_e.a.logButton},"Login")))})),ge=Object(H.b)(null,{login:function(e){return function(){u(e)}},verifyDisplay:function(e){return{type:"SET_VERIFY_DISPLAY",verifyDisplay:e}},loginHide:function(e){return{type:"SET_LOGIN_HIDE",loginHide:e}}})((function(e){return T.a.createElement("div",null,T.a.createElement("h3",null,"Login"),T.a.createElement(Oe,{onSubmit:function(t){e.login(t.tel),e.verifyDisplay("block"),e.loginHide("none")}}),T.a.createElement(be,null))}));var Pe=function(e){var t=Object(H.d)((function(e){return e.loginPage.isAuth})),a=Object(H.c)();return Object(M.useEffect)((function(){a((function(e){d().then((function(t){console.log(t.data),e(y(t.data.user.tel,t.data.user.name,!0)),localStorage.setItem("token",t.data.token)}))}))}),[]),T.a.createElement(R.a,{basename:"/pizza-app"},T.a.createElement("main",{className:"app-wrapper"},T.a.createElement(B,null),T.a.createElement("div",{className:"app-content-wrapper"},T.a.createElement(V.b,{path:"/cart",render:function(){return T.a.createElement(ee,null)}}),T.a.createElement(V.b,{path:"/menu",render:function(){return T.a.createElement(fe,null)}}),t?T.a.createElement(V.b,{path:"/Profile",render:function(){return T.a.createElement(ne,null)}}):T.a.createElement(V.b,{path:"/login",render:function(){return T.a.createElement(ge,null)}}))))};A.a.render(T.a.createElement(H.a,{store:z},T.a.createElement(Pe,null)),document.getElementById("root"))},34:function(e,t,a){e.exports={wrapForm:"Login_wrapForm__26Jov",logButton:"Login_logButton__PUblt"}},52:function(e,t,a){e.exports={formControl:"FormControls_formControl__3RSBA",error:"FormControls_error__2BwiL",input:"FormControls_input__3VCSg"}},54:function(e,t,a){e.exports={headerWrap:"Menu_headerWrap__1dT5I",showVal:"Menu_showVal__2mN2k"}},9:function(e,t,a){e.exports={wrapInput:"Cart_wrapInput__1StXJ",buttonForm:"Cart_buttonForm__VlKEu",switcherCartWrap:"Cart_switcherCartWrap__2qEyf",showVal:"Cart_showVal__2SMZr",element:"Cart_element__3xy1E",imgElement:"Cart_imgElement__o7Mje",name:"Cart_name__2YK7Z",description:"Cart_description__2t30F",price:"Cart_price__3-dNd",addToCart:"Cart_addToCart__36K71",wrapElement:"Cart_wrapElement__2lfA9",wrapPriceButton:"Cart_wrapPriceButton__14VcO",wrapPrice:"Cart_wrapPrice__1ZnKR"}}},[[116,1,2]]]);
//# sourceMappingURL=main.383e4a39.chunk.js.map